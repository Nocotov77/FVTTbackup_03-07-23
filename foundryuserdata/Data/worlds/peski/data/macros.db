{"type":"script","scope":"actor","name":"Ярость","img":"icons/creatures/abilities/mouth-teeth-human.webp","command":"dnd5e.documents.macro.rollItem(\"Ярость\")","flags":{"dnd5e":{"itemMacro":true}},"author":"paaMo51PmhpJTRPR","folder":null,"sort":0,"ownership":{"default":0,"paaMo51PmhpJTRPR":3},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.4","coreVersion":"10.291","createdTime":1675196407378,"modifiedTime":1675196407378,"lastModifiedBy":"paaMo51PmhpJTRPR"},"_id":"3FdvDTxKNuX4y866"}
{"type":"script","scope":"actor","name":"Цеп самобичевателя","img":"icons/weapons/maces/mace-round-spiked-black.webp","command":"dnd5e.documents.macro.rollItem(\"Цеп самобичевателя\")","flags":{"dnd5e":{"itemMacro":true}},"author":"paaMo51PmhpJTRPR","folder":null,"sort":0,"ownership":{"default":0,"paaMo51PmhpJTRPR":3},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.4","coreVersion":"10.291","createdTime":1675196399010,"modifiedTime":1675196399010,"lastModifiedBy":"paaMo51PmhpJTRPR"},"_id":"65HMELnSiKfkQf1j"}
{"name":"Картинка в чат или шепот","type":"script","author":"DnbAioB41P2H6uBO","img":"https://cdn.iconscout.com/icon/free/png-256/send-mail-69-667875.png","scope":"global","command":"// Макрос для Foundry, который позволяет отправить картинку (из ссылки) определённому игроку или всем игрокам. Причем если в Чат, то картинка будет приватной, а если как Всплывающее изображение, то будет показано всем. \nconst wait = (delay) => new Promise((resolve) => setTimeout(resolve, delay));\nasync function imageMessage(html, mode) {\n    const url = html.find(\"[name=url]\")[0].value;\n    if (url === \"\") {\n        return;\n    }\n    if (mode == \"chat\") {\n        const messageContent = `<img src=\"${url}\" />`;\n        const checked = html.find(\"[name=whisper]\")[0].checked;\n        if(!checked) {\n            await ChatMessage.create({content: messageContent});\n            return;\n        }\n        const playerId = html.find(\"[name=player]\")[0].value;\n        const playerName = game.users.get(playerId).data.name;\n        await ChatMessage.create({content: messageContent, whisper: ChatMessage.getWhisperRecipients(playerName)})\n    }\n    if (mode == \"popout\"){\n        const popout = new ImagePopout(url).render(true);\n        popout.shareImage();\n    }\n\n}\n(async () => {\n    let dialogOptions = game.users.filter(u => u.data.role < 3).map(u => `<option value=${u.id}> ${u.data.name} </option>`).join(``);\n    \n    \n    let dialogContent = `\n                        <div><h2>Вставьте ссылку на изображение:</h2><div>\n                        <div>URL: <input name=\"url\" style=\"width:350px\"/></div>\n                        <div><i>если изображение взято из Интернета, не забудьте включить http(s):// в url</i></div>\n                        <div>Шептать игроку?<input name=\"whisper\" type=\"checkbox\"/></div>\n                        <div\">Имя игрока:<select name=\"player\" disabled>${dialogOptions}</select></div>\n                        `;\n    let d = new Dialog({\n        title: \"Image to Chat\",\n        content: dialogContent,\n        buttons: {\n            done: {\n                label: \"Отправить в чат!\",\n                callback: (html) => {\n                    imageMessage(html, \"chat\");\n                }\n            },\n            show: {\n                label: \"Показать как всплывающее изображение!\",\n                callback: (html) => {\n                    imageMessage(html, \"popout\");\n                }\n            }\n        },\n        default: \"done\"    \n    })\n    d.render(true)\n    await wait(50)\n    $(document).ready(function() {\n        $(\"[name=whisper]\").change(function () {\n            if($(\"[name=player]\").attr(\"disabled\")){\n                $(\"[name=player]\").removeAttr(\"disabled\")\n            }\n            else {\n               $(\"[name=player]\").attr(\"disabled\", true)  \n            }\n        });\n    });\n})();","flags":{"advanced-macros":{"runAsGM":false},"exportSource":{"world":"cm1_jes","system":"dnd5e","coreVersion":"9.269","systemVersion":"1.6.3"},"core":{"sourceId":"Macro.fSyGEAXUVN12sTo1"}},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.4","coreVersion":"10.291","createdTime":1672486740754,"modifiedTime":1675087718404,"lastModifiedBy":"DnbAioB41P2H6uBO"},"folder":"ea6hqL14h8bjDn07","sort":103125,"ownership":{"default":2,"ekSJaSkR4p1sowmM":3,"DnbAioB41P2H6uBO":3},"_id":"6uuZyZ1ULgtu1qTp"}
{"name":"Don't Mark Dead","type":"script","author":"T4U33qWhlaukW8Js","img":"icons/svg/aura.svg","scope":"global","command":"/**\n*  This macro will make this NPC show as Unconscious (or whatever is the first stage).\n*  This is meant for people that use the \"NPCs die immediately\" setting but still want some NPCs to not be shown as dead.\n*  Use it again to toggle it.\n*/\n\nfor (let e of canvas.tokens.controlled) {\n\tlet hasAlive = !e.document.getFlag(\"healthEstimate\", \"treatAsPC\")\n\te.document.setFlag(\"healthEstimate\", \"treatAsPC\", hasAlive)\n}","folder":"o5cNVZikvnCVLuuE","sort":100000,"flags":{"core":{"sourceId":"Macro.bCMlVEb7wx14ACIB"},"advanced-macros":{"runAsGM":false}},"ownership":{"default":0,"oPuS5iW18dRDcW4r":3,"T4U33qWhlaukW8Js":3},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.4","coreVersion":"10.291","createdTime":1675773295095,"modifiedTime":1675773295138,"lastModifiedBy":"T4U33qWhlaukW8Js"},"_id":"8NaZMgL6dGj3HA43"}
{"name":"Свет","type":"script","author":"DnbAioB41P2H6uBO","img":"icons/sundries/lights/lantern-iron-lit-yellow.webp","scope":"global","command":"// Макрос для Foundry, который позволяет пользователю настраивать параметры освещения своего токена. \nfunction tokenUpdate(data) {\n  canvas.tokens.controlled.map(token => token.document.update({light: data}));\n}\n\nlet torchAnimation = {\"type\": \"torch\", \"speed\": 1, \"intensity\": 1, \"reverse\": false};\n\nlet dialogEditor = new Dialog({\n  title: `Светильник для токена`,\n  content: `Выберите источник света для этого токена.`,\n  buttons: {\n    none: {\n      label: `Отключить`,\n      callback: () => {\n        tokenUpdate({\"dim\": 0, \"bright\": 0, \"angle\": 360, \"luminosity\": 0.5});\n        dialogEditor.render(true);\n      }\n    },\n    torch: {\n      label: `Факел`,\n      callback: () => {\n        tokenUpdate({\"dim\": 40, \"bright\": 20, \"angle\": 360, \"luminosity\": 0.5, \"animation\": torchAnimation});\n        dialogEditor.render(true);\n      }\n    },\n    light: {\n      label: `Фокус Свет`,\n      callback: () => {\n        tokenUpdate({\"dim\": 40, \"bright\": 20, \"angle\": 360, \"luminosity\": 0.5, \"animation\": {\"type\": \"none\"}});\n        dialogEditor.render(true);\n      }\n    },\n    lamp: {\n      label: `Лампа`,\n      callback: () => {\n        tokenUpdate({\"dim\": 45, \"bright\": 15, \"angle\": 360, \"luminosity\": 0.5, \"animation\": torchAnimation});\n        dialogEditor.render(true);\n      }\n    },\n    bullseye: {\n      label: `Потайной фонарь`,\n      callback: () => {\n        tokenUpdate({\"dim\": 120, \"bright\": 60, \"angle\": 45, \"luminosity\": 0.5, \"animation\": torchAnimation});\n        dialogEditor.render(true);\n      }\n    },\n    hoodedOpen: {\n      label: `Обычный фонарь (Открыт)`,\n      callback: () => {\n        tokenUpdate({\"dim\": 60, \"bright\": 30, \"angle\": 360, \"luminosity\": 0.5, \"animation\": torchAnimation});\n        dialogEditor.render(true);\n      }\n    },\n    hoodedClosed: {\n      label: `Обычный фонарь (Приглушен)`,\n      callback: () => {\n        tokenUpdate({\"dim\": 5, \"bright\": 0, \"angle\": 360, \"luminosity\": 0.5, \"animation\": torchAnimation});\n        dialogEditor.render(true);\n      }\n    },\n    darkness: {\n      label: `Заклинание Тьма`,\n      callback: () => {\n        tokenUpdate({\"dim\": 0, \"bright\": 15, \"angle\": 360, \"luminosity\": -0.5, \"animation\": {\"type\": \"none\"}});\n        dialogEditor.render(true);\n      }\n    },\n    \n  },\n  default: \"close\",\n  close: () => {}\n});\n\ndialogEditor.render(true)","flags":{"exportSource":{"world":"novaya-sistema","system":"dnd5e","coreVersion":"9.280","systemVersion":"1.6.3"},"core":{"sourceId":"Macro.zTQcAR35R2r30R50"}},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.4","coreVersion":"10.291","createdTime":1672483553775,"modifiedTime":1675087718404,"lastModifiedBy":"DnbAioB41P2H6uBO"},"folder":"ea6hqL14h8bjDn07","sort":150000,"ownership":{"default":2,"ekSJaSkR4p1sowmM":3,"DnbAioB41P2H6uBO":3},"_id":"8uX066yMRdCvVVzi"}
{"type":"script","scope":"actor","name":"Безрассудная атака","img":"icons/skills/melee/blade-tips-triple-bent-white.webp","command":"dnd5e.documents.macro.rollItem(\"Безрассудная атака\")","flags":{"dnd5e":{"itemMacro":true}},"author":"paaMo51PmhpJTRPR","folder":null,"sort":0,"ownership":{"default":0,"paaMo51PmhpJTRPR":3},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.4","coreVersion":"10.291","createdTime":1675196941523,"modifiedTime":1675196941523,"lastModifiedBy":"paaMo51PmhpJTRPR"},"_id":"Ajzunu2TFEEArfqf"}
{"name":"Hide Estimate","type":"script","flags":{"core":{"sourceId":"Macro.f1dST0uSVk2pCby1"}},"scope":"global","command":"/**\n*  This macro will hide the Health Estimate from selected tokens.\n*/\n\nfor (let e of canvas.tokens.controlled) {\n\tlet hidden = !e.document.getFlag(\"healthEstimate\", \"hideHealthEstimate\");\n\te.document.setFlag(\"healthEstimate\", \"hideHealthEstimate\", hidden)\n\tif (hidden) ui.notifications.info(`${e.actor.data.name}'s health estimate is hidden from players.`);\n\telse ui.notifications.info(`${e.actor.data.name}'s health estimate is shown to players.`);\n}","author":"T4U33qWhlaukW8Js","img":"icons/svg/cowled.svg","ownership":{"default":0,"T4U33qWhlaukW8Js":3},"folder":"o5cNVZikvnCVLuuE","sort":200000,"_stats":{"systemId":"dnd5e","systemVersion":"2.1.4","coreVersion":"10.291","createdTime":1675773296280,"modifiedTime":1675773296323,"lastModifiedBy":"T4U33qWhlaukW8Js"},"_id":"KETefLE18EGyp5KE"}
{"name":"Заявка","type":"script","scope":"global","author":"DnbAioB41P2H6uBO","img":"icons/skills/social/wave-halt-stop.webp","command":"// Макрос для Foundry, который позволяет пользователю вывести в чат сообщение о заявке. Спасибо Elfrey и Salamander\n// Макрос для Foundry, который позволяет пользователю вывести в чат сообщение о заявке. Спасибо Elfrey и Salamander\nAudioHelper.play({src: 'worlds/peski/media/sounds/Spanking.mp3', volume: 1, autoplay: true, loop: false}, true);\n\nconst text = '<h1 style=\"text-align: center;\"><span style=\"font-size:36px;\"><span style=\"color:#8000ff;\">Заявка</strong></h1><img src=\"icons/skills/social/wave-halt-stop.webp\" width=\"350\">'\n\nChatMessage.create({\nuser: game.user._id,\nspeaker: ChatMessage.getSpeaker({token: actor}),\ncontent: text\n});","flags":{"core":{"sourceId":"Macro.PtMGtNubVSLEDRL0"},"advanced-macros":{"runAsGM":false}},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.4","coreVersion":"10.291","createdTime":1672482311656,"modifiedTime":1675263960893,"lastModifiedBy":"DnbAioB41P2H6uBO"},"folder":"ea6hqL14h8bjDn07","sort":200000,"ownership":{"default":2,"ekSJaSkR4p1sowmM":3,"DnbAioB41P2H6uBO":3},"_id":"MgdDkAiKIX9l8Sp7"}
{"type":"script","scope":"actor","name":"Божественный гнев","img":"icons/weapons/swords/sword-flanged-lightning.webp","command":"dnd5e.documents.macro.rollItem(\"Божественный гнев\")","flags":{"dnd5e":{"itemMacro":true}},"author":"paaMo51PmhpJTRPR","folder":null,"sort":0,"ownership":{"default":0,"paaMo51PmhpJTRPR":3},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.4","coreVersion":"10.291","createdTime":1675196925826,"modifiedTime":1675196925826,"lastModifiedBy":"paaMo51PmhpJTRPR"},"_id":"R2LvhAF4FWEaWQm6"}
{"name":"Шепот","type":"script","author":"DnbAioB41P2H6uBO","img":"https://cdn-icons-png.flaticon.com/512/2755/2755344.png","scope":"global","command":"/** \n * Предоставляет диалог для шепота определенным игрокам. Если у вас выбраны токены, по умолчанию они автоматически попытаются прошептать этим игрокам.\n * @Author: Nelson#3570\n */\n\nlet applyChanges = false;\n\nlet users = game.users.filter(user => user.active);\nlet checkOptions = \"\"\nlet playerTokenIds = users.map(u => u.character?.id).filter(id => id !== undefined);\nlet selectedPlayerIds = canvas.tokens.controlled.map(token => {\n  if (playerTokenIds.includes(token.actor.id)) return token.actor.id;\n});\n\n// Build checkbox list for all active players\nusers.forEach(user => {\n  let checked = !!user.character && selectedPlayerIds.includes(user.character.id) && 'checked';\n  checkOptions+=`\n    <br>\n    <input type=\"checkbox\" name=\"${user.id}\" id=\"${user.id}\" value=\"${user.name}\" ${checked}>\\n\n    <label for=\"${user.id}\">${user.name}</label>\n  `\n});\n\nnew Dialog({\n  title:\"Шёпот\",\n  content:`Шептать: ${checkOptions} <br>\n    <label for=\"message\">Сообщение:</label>\n    <textarea id=\"message\" name=\"message\" rows=\"4\" cols=\"50\"></textarea><br>`,\n  buttons:{\n    whisper:{   \n      label:\"Whisper\",\n      callback: (html) => createMessage(html)\n    }\n  }\n}).render(true);\n\nfunction createMessage(html) {\n  var targets = [];\n  // build list of selected players ids for whispers target\n  for ( let user of users ) {\n    if (html.find('[name=\"'+user.id+'\"]')[0].checked){\n      applyChanges=true;\n      targets.push(user.id);\n    }\n    var messageText = html.find('[name=\"message\"]')[0].value\n  }\nif(!applyChanges)return;\n  ChatMessage.create({\n    content: messageText,\n    whisper: targets\n  });\n}","flags":{"advanced-macros":{"runAsGM":false},"exportSource":{"world":"demo-mad-mage","system":"dnd5e","coreVersion":"10.288","systemVersion":"2.0.3"},"core":{"sourceId":"Macro.yri0AA1nqi7s8xMu"}},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.4","coreVersion":"10.291","createdTime":1672485830656,"modifiedTime":1675087718404,"lastModifiedBy":"DnbAioB41P2H6uBO"},"folder":"ea6hqL14h8bjDn07","sort":106250,"ownership":{"default":2,"ekSJaSkR4p1sowmM":3,"DnbAioB41P2H6uBO":3},"_id":"VPkS8OouzMDWiila"}
{"name":"Конец хода","type":"script","scope":"global","author":"DnbAioB41P2H6uBO","img":"icons/skills/melee/weapons-crossed-daggers-orange.webp","command":"/*\nAuthor: willisrocks\nDescription: \n\nЗавершает текущий ход актеров боевым столкновением. Полезно, когда вы не используете свой боевой трекер. и хотите закончить ход с панели быстрого доступа. Если пользователь является гейм-мастером, он всегда будет завершать текущий ход. \nДля игроков это только закончится ход, когда текущий актер в порядке хода принадлежит вам. На основе работы пользователя Reddit serrag97: https://www.reddit.com/r/FoundryVTT/comments/j1b8gs/next_turn_shortcut/\n*/\n\n// check if the user is a GM\nconst isGM = game.user.isGM;\n// check if the user owns the combatant whose turn it is\nconst isOwner = game.combat.combatant.isOwner;\n\nif (isGM || isOwner) {\n  game.combat.nextTurn();\n} else {\n  ui.notifications.info(\"Как игрок вы можете только продвигать свой ход\");\n}","flags":{"core":{"sourceId":"Macro.2hjDVnk5dbuCSuH6"}},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.4","coreVersion":"10.291","createdTime":1672482529405,"modifiedTime":1675087718404,"lastModifiedBy":"DnbAioB41P2H6uBO"},"folder":"ea6hqL14h8bjDn07","sort":125000,"ownership":{"default":2,"ekSJaSkR4p1sowmM":3,"DnbAioB41P2H6uBO":3},"_id":"X37XdiEw1NGB9Est"}
{"name":"Справочник","type":"script","author":"DnbAioB41P2H6uBO","img":"modules/laaru-dnd5-hw/assets/icons/feat/phb-skilled.webp","scope":"global","command":"// Макрос для Foundry, который позволяет пользователю открыть справочник Phenomen'a. \nnew Dialog({\n title: \"Справочник\",\n content: `<iframe id=\"jsdos\" src=\"https://5e.ruleplaying.com/\" width=\"100%\" height=\"100%\"></iframe>`,\n buttons: {},\n render: html => {\n        html.style.flex = \"100%\";\n        html.querySelector(\"#jsdos\").focus();\n     }\n}, { height: 600, width: 800, jQuery: false }).render(true);","flags":{"exportSource":{"world":"avernus","system":"dnd5e","coreVersion":"9.269","systemVersion":"1.6.3"},"core":{"sourceId":"Macro.ufppKNOT0u4ygCXI"}},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.4","coreVersion":"10.291","createdTime":1672483532195,"modifiedTime":1675087718404,"lastModifiedBy":"DnbAioB41P2H6uBO"},"folder":"ea6hqL14h8bjDn07","sort":112500,"ownership":{"default":2,"ekSJaSkR4p1sowmM":3,"DnbAioB41P2H6uBO":3},"_id":"bE7ZswEtY6ZNP4Zw"}
{"name":"Проверка Проницательности","type":"script","author":"DnbAioB41P2H6uBO","img":"https://i.imgur.com/0xfQUUi.png","scope":"global","command":"//Проверка навыка. \n// Если у игрока несколько персонажей, необходимо выделить тот токен, за которого будет бросаться проверка.\nactor.rollSkill('ins');","flags":{"advanced-macros":{"runAsGM":false},"exportSource":{"world":"avernus","system":"dnd5e","coreVersion":"9.269","systemVersion":"1.6.3"},"core":{"sourceId":"Macro.fSyGEAXUVN12sTo1"}},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.4","coreVersion":"10.291","createdTime":1672486763863,"modifiedTime":1675087718404,"lastModifiedBy":"DnbAioB41P2H6uBO"},"folder":"ea6hqL14h8bjDn07","sort":100782,"ownership":{"default":2,"ekSJaSkR4p1sowmM":3,"DnbAioB41P2H6uBO":3},"_id":"g8LfSa867eWQ1Jh9"}
{"name":"Mark Dead","type":"script","flags":{"core":{"sourceId":"Macro.bCMlVEb7wx14ACIB"}},"scope":"global","command":"/**\n*  This macro will mark the selected tokens as dead.\n*  If all the selected tokens are dead, they will be marked\n   as alive instead.\n*/\n\nfor (let e of canvas.tokens.controlled) {\n\tlet hasAlive = !e.document.getFlag(\"healthEstimate\", \"dead\")\n\te.document.setFlag(\"healthEstimate\", \"dead\", hasAlive)\n}","author":"T4U33qWhlaukW8Js","img":"icons/svg/bones.svg","ownership":{"default":0,"T4U33qWhlaukW8Js":3},"folder":"o5cNVZikvnCVLuuE","sort":150000,"_stats":{"systemId":"dnd5e","systemVersion":"2.1.4","coreVersion":"10.291","createdTime":1675773297694,"modifiedTime":1675773297751,"lastModifiedBy":"T4U33qWhlaukW8Js"},"_id":"gJ6nfCVieWRGi0Tl"}
{"name":"Output Estimates: Hide Names","type":"script","author":"T4U33qWhlaukW8Js","img":"icons/svg/cowled.svg","scope":"global","command":"/**\n*  This macro will hide the Health Estimate from selected tokens.\n*/\n\nfor (let e of canvas.tokens.controlled) {\n\tlet hidden = !e.document.getFlag(\"healthEstimate\", \"hideName\");\n\te.document.setFlag(\"healthEstimate\", \"hideName\", hidden)\n\tif (hidden) ui.notifications.info(`${e.actor.data.name}'s name is hidden from players.`);\n\telse ui.notifications.info(`${e.actor.data.name}'s name is shown to players.`);\n}","folder":"o5cNVZikvnCVLuuE","sort":125000,"flags":{"core":{"sourceId":"Macro.f1dST0uSVk2pCby1"}},"ownership":{"default":0,"T4U33qWhlaukW8Js":3},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.4","coreVersion":"10.291","createdTime":1675773298842,"modifiedTime":1675773298885,"lastModifiedBy":"T4U33qWhlaukW8Js"},"_id":"i1jwCdUdhoj2b0W3"}
{"name":"Случайные броски характеристик","type":"script","author":"DnbAioB41P2H6uBO","img":"icons/sundries/gaming/dice-pair-white-green.webp","scope":"global","command":"/**\n * Генерирует характеристики персонажа и выводит результат в виде таблицы.\n * Author: @Kekilla#7036 & KrishMero1792\n */\n \n// Formula for rolling \nconst statString = '4d6kh3';\n\n// times to roll those stats\nconst numRolls = 6;\n\n\n//////////////////////////////////////////\n// Don't touch anything below this line //\n//////////////////////////////////////////\nconst stats = Array(numRolls).fill(0).map(e=>new Roll(statString).evaluate({async: false}));\n\nconst rollData = stats[0].dice[0];\nconst {faces, values: keptRolls, results: rolls} = rollData;\nconst totalAverage = (faces/2 + 1) * keptRolls.length;\nconst totalDeviation = faces/2;\nconst totalLow = Math.ceil(totalAverage - totalDeviation);\nconst totalHigh = Math.ceil(totalAverage + totalDeviation);\n\nconst header = rolls.map((roll, index) => `<th>D${index + 1}</th>`).join('');\n\nlet tableRows = '';\nlet finalSum = 0;\nfor(let {terms, total} of stats) {\n  tableRows += `<tr style=\"text-align:center\">`;\n  tableRows += terms[0].results.map(({result, discarded}) => `<td style=\"${colorSetter(result, 1, faces, discarded)}\">${result}</td>`).join('');\n  tableRows += `<td style=\"border-left:1px solid #000; ${colorSetter(total, totalLow, totalHigh)}\">${total}</td></tr>`;\n  finalSum += total;\n}\n\nconst colspan = `colspan=\"${rolls.length + 1}\"`;\nconst center = `text-align:center;`;\n\nlet content = `\n  <table>\n    <tr>\n      <td ${colspan}><h2 style=\"margin-bottom:0; ${center}\">Значения характеристик</h2>\n      <div style=\"margin-bottom: 0.5rem; ${center}\">${statString} были проброшены ${numRolls} раз.</div></td>\n    </tr>\n    <tr style=\"${center} border-bottom:1px solid #000\">\n      ${header}\n      <th style=\"border-left:1px solid #000\">Итог</th>\n    </tr>\n    ${tableRows}\n    <tr style=\"border-top: 1px solid #000\">\n      <th colspan=\"${rolls.length}\" style=\"${center}\">Финальная сумма:</th>\n      <th style=\"${center}\">${finalSum}</th>\n    </tr>\n  </table>\n`;\n\n\nChatMessage.create({content});\n\nfunction colorSetter(number,low,high, discarded)\n{\n  if(discarded === true) return 'text-decoration:line-through;color:gray';\n  if(number <= low) return 'color:red';\n  if(number >= high) return 'color:green';\n  return '';\n}","flags":{"core":{"sourceId":"Compendium.foundry_community_macros.community-macros-roll.cj0Sm0kWnHx11nFR"},"exportSource":{"world":"novaya-sistema","system":"dnd5e","coreVersion":"9.269","systemVersion":"1.6.3"}},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.4","coreVersion":"10.291","createdTime":1672485699440,"modifiedTime":1675087718404,"lastModifiedBy":"DnbAioB41P2H6uBO"},"folder":"ea6hqL14h8bjDn07","sort":100000,"ownership":{"default":2,"ekSJaSkR4p1sowmM":3,"DnbAioB41P2H6uBO":3},"_id":"iDhRFv7gcbVv4hSs"}
{"name":"Проверка Расследования","type":"script","author":"DnbAioB41P2H6uBO","img":"https://i.imgur.com/VibZPwz.png","scope":"global","command":"//Проверка навыка. \n// Если у игрока несколько персонажей, необходимо выделить тот токен, за которого будет бросаться проверка.\nactor.rollSkill('inv');","flags":{"advanced-macros":{"runAsGM":false},"exportSource":{"world":"avernus","system":"dnd5e","coreVersion":"9.269","systemVersion":"1.6.3"},"core":{"sourceId":"Macro.fSyGEAXUVN12sTo1"}},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.4","coreVersion":"10.291","createdTime":1672486924439,"modifiedTime":1675087718404,"lastModifiedBy":"DnbAioB41P2H6uBO"},"folder":"ea6hqL14h8bjDn07","sort":100391,"ownership":{"default":2,"ekSJaSkR4p1sowmM":3,"DnbAioB41P2H6uBO":3},"_id":"pGcaGX5hDYvfcsGI"}
{"type":"script","scope":"actor","name":"Цеп самобичевателя (ярость)","img":"icons/weapons/maces/mace-round-spiked-black.webp","command":"dnd5e.documents.macro.rollItem(\"Цеп самобичевателя (ярость)\")","flags":{"dnd5e":{"itemMacro":true}},"author":"paaMo51PmhpJTRPR","folder":null,"sort":0,"ownership":{"default":0,"paaMo51PmhpJTRPR":3},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.4","coreVersion":"10.291","createdTime":1675196868202,"modifiedTime":1675196868202,"lastModifiedBy":"paaMo51PmhpJTRPR"},"_id":"vo53prCKLLFrucY6"}
{"name":"Проверка Внимания","type":"script","author":"DnbAioB41P2H6uBO","img":"https://i.imgur.com/jOQlpmI.png","scope":"global","command":"//Проверка навыка. \n// Если у игрока несколько персонажей, необходимо выделить тот токен, за которого будет бросаться проверка.\nactor.rollSkill('prc');","flags":{"advanced-macros":{"runAsGM":false},"exportSource":{"world":"avernus","system":"dnd5e","coreVersion":"9.269","systemVersion":"1.6.3"},"core":{"sourceId":"Macro.fSyGEAXUVN12sTo1"}},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.4","coreVersion":"10.291","createdTime":1672486954303,"modifiedTime":1675087718404,"lastModifiedBy":"DnbAioB41P2H6uBO"},"folder":"ea6hqL14h8bjDn07","sort":101563,"ownership":{"default":2,"ekSJaSkR4p1sowmM":3,"DnbAioB41P2H6uBO":3},"_id":"x78K4u52Pwnttmii"}
